# **02 \- Database Schema & Data Models**

**Project Name:** \[Project Name\]

**Generated By:** @system-analyst

**Reference:** docs/00-business-context/01-brd.md, docs/01-system-context/01-architecture.md

## **1\. Database Strategy Overview**

\<\!-- AI INSTRUCTION: Write a brief overview (1-2 paragraphs) explaining the chosen database paradigm (e.g., Relational/PostgreSQL or NoSQL/MongoDB) based on the Architecture document. Highlight how the database handles Data Isolation/Multi-Tenancy as required by the business constraints. \--\>

\[Database Strategy Overview\]

## **2\. Entity Relationship Diagram (ERD)**

\<\!-- AI INSTRUCTION: Create a detailed Mermaid JS erDiagram illustrating the core entities, their attributes, and their relationships. Ensure cardinality (one-to-many, many-to-many) is accurately represented. Include Primary Keys (PK) and Foreign Keys (FK). \--\>

erDiagram
    %% Basic Structure Example (Replace and expand based on BRD)
    USERS ||--o{ TENANTS : "belongs to"
    TENANTS ||--o{ RESOURCES : "owns"

    USERS {
        uuid id PK
        string email UK
        string password\_hash
        timestamp created\_at
    }

    TENANTS {
        uuid id PK
        string name
        timestamp created\_at
    }

    RESOURCES {
        uuid id PK
        uuid tenant\_id FK
        string name
        enum status "ACTIVE, INACTIVE"
    }

## **3\. Core Database Schema (DDL)**

\<\!-- AI INSTRUCTION: Provide the exact SQL Data Definition Language (DDL) CREATE TABLE statements for the core entities.

CRITICAL RULES:

1. Use UUID for all Primary Keys instead of auto-incrementing integers.
2. Use strong typing (e.g., VARCHAR, TIMESTAMPTZ, JSONB for flexible data).
3. Explicitly define FOREIGN KEY constraints and ON DELETE cascading rules.
4. Add basic comments to explain complex columns. \--\>

### **3.1 Users & Authentication Tables**

\-- Example structure (Replace with actual project requirements)
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen\_random\_uuid(),
    email VARCHAR(255) UNIQUE NOT NULL,
    password\_hash VARCHAR(255) NOT NULL,
    role VARCHAR(50) DEFAULT 'USER',
    created\_at TIMESTAMPTZ DEFAULT NOW(),
    updated\_at TIMESTAMPTZ DEFAULT NOW()
);

### **3.2 Core Business Tables**

\<\!-- AI INSTRUCTION: Generate the DDL for the main operational tables based on the specific business features requested in the BRD. \--\>

\-- \[Insert Core Tables DDL here\]

## **4\. Multi-Tenancy & Data Isolation Strategy**

\<\!-- AI INSTRUCTION: Explain technically how data privacy and isolation between different clients/workspaces are enforced. \--\>

* **Tenant Identifier:** \[e.g., Every operational table MUST have a tenant\_id or project\_id column as a Foreign Key.\]
* **Isolation Enforcement:** \[e.g., Explain if you are using Row-Level Security (RLS) in PostgreSQL, or if isolation is enforced purely at the application logic/ORM level.\]

## **5\. Indexing & Optimization**

\<\!-- AI INSTRUCTION: List the specific columns or combination of columns that require indexing to maintain performance as data grows (refer to the Scalability section in NFR). \--\>

* **\[Table Name\] \- \[Column Name\]:** \[e.g., users \- email (B-Tree Index for faster login lookups)\]
* **\[Table Name\] \- \[Column Name\]:** \[e.g., resources \- tenant\_id (Crucial for filtering data per workspace)\]